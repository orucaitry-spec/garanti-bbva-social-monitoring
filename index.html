<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garanti BBVA Sosyal Medya Izleme</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .last-update {
            color: #666;
            font-size: 0.9em;
        }

        .date-nav {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .date-nav button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .date-nav button:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .date-nav button.active {
            background: #764ba2;
            box-shadow: 0 5px 15px rgba(118, 75, 162, 0.4);
        }

        .date-nav select {
            padding: 10px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-trend {
            font-size: 0.8em;
            margin-top: 10px;
        }

        .trend-up { color: #e74c3c; }
        .trend-down { color: #27ae60; }

        .heatmap {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .heatmap h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: auto repeat(24, 1fr);
            gap: 3px;
            font-size: 0.75em;
        }

        .heatmap-label {
            display: flex;
            align-items: center;
            padding: 5px;
            font-weight: 600;
            color: #666;
        }

        .heatmap-hour {
            text-align: center;
            padding: 5px 2px;
            font-size: 0.8em;
            color: #999;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .heatmap-cell:hover {
            transform: scale(1.2);
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .heatmap-cell[data-intensity="0"] { background: #eee; }
        .heatmap-cell[data-intensity="1"] { background: #ffeda0; }
        .heatmap-cell[data-intensity="2"] { background: #feb24c; }
        .heatmap-cell[data-intensity="3"] { background: #f03b20; }
        .heatmap-cell[data-intensity="4"] { background: #bd0026; }

        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.85em;
            pointer-events: none;
            z-index: 1000;
            display: none;
            white-space: nowrap;
        }

        .issues-list {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .issue-item {
            padding: 20px;
            border-left: 4px solid #e74c3c;
            background: #fff5f5;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .issue-title {
            font-weight: bold;
            color: #c0392b;
            margin-bottom: 10px;
        }

        .issue-meta {
            font-size: 0.85em;
            color: #666;
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .legend {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85em;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>&#128200; Garanti BBVA Sosyal Medya Izleme</h1>
            <div class="last-update">Son guncelleme: <span id="lastUpdate">3 Subat 2026, 21:00</span></div>
        </header>

        <div class="date-nav">
            <span>&#128197; Tarih Sec:</span>
            <button class="date-btn active" data-date="2026-02-03">Bugun (3 Sub)</button>
            <button class="date-btn" data-date="2026-02-02">Dun (2 Sub)</button>
            <button class="date-btn" data-date="2026-02-01">1 Sub</button>
            <select id="monthSelect">
                <option value="2026-02">Subat 2026</option>
                <option value="2026-01">Ocak 2026</option>
            </select>
        </div>

        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-label">&#128241; Toplam Mention</div>
                <div class="stat-value" id="totalMentions">-</div>
                <div class="stat-trend trend-up">&#8593; +2 bugun</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">&#128308; Kritik Sorunlar</div>
                <div class="stat-value" id="criticalIssues">-</div>
                <div class="stat-trend trend-down">&#8595; 1 dusuk</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">&#11088; Store Rating</div>
                <div class="stat-value" id="storeRating">-</div>
                <div class="stat-trend trend-down">&#8595; 0.3 azaldi</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">&#9201; Avg Response Time</div>
                <div class="stat-value" id="responseTime">-</div>
                <div class="stat-trend trend-down">&#8595; 2sa iyilesti</div>
            </div>
        </div>

        <div class="heatmap">
            <h2>&#128293; Aktivite Isi Haritasi (7 Gun)</h2>
            <div class="heatmap-grid" id="heatmapGrid"></div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #eee;"></div>
                    <span>Aktivite yok</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ffeda0;"></div>
                    <span>1-2 entry</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #feb24c;"></div>
                    <span>3-5 entry</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #f03b20;"></div>
                    <span>6-10 entry</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #bd0026;"></div>
                    <span>10+ entry</span>
                </div>
            </div>
        </div>

        <div class="issues-list">
            <h2 style="margin-bottom: 20px;">&#128680; Devam Eden Kritik Sorunlar</h2>
            <div id="issuesList"></div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Sample data structure
        const reportData = {
            '2026-02-03': {
                totalMentions: 16,
                criticalIssues: 2,
                storeRating: 2.2,
                responseTime: '4sa',
                issues: [
                    {
                        title: 'iOS FaceID Giris Hatasi',
                        platform: 'App Store',
                        version: '8.45.0',
                        impact: 'Yuksek',
                        status: 'Devam ediyor',
                        duration: '2+ gun'
                    },
                    {
                        title: 'Android Uygulama Acilmiyor',
                        platform: 'Google Play',
                        version: '8.45.2',
                        impact: 'Kritik',
                        status: 'Devam ediyor',
                        duration: '3+ gun'
                    }
                ],
                heatmap: generateSampleHeatmap()
            },
            '2026-02-02': {
                totalMentions: 14,
                criticalIssues: 3,
                storeRating: 2.2,
                responseTime: '6sa',
                issues: [
                    {
                        title: 'iOS FaceID Giris Hatasi',
                        platform: 'App Store',
                        version: '8.45.0',
                        impact: 'Yuksek',
                        status: 'Yeni',
                        duration: '1 gun'
                    }
                ],
                heatmap: generateSampleHeatmap()
            }
        };

        function generateSampleHeatmap() {
            const days = ['Pzt', 'Sal', 'Car', 'Per', 'Cum', 'Cmt', 'Paz'];
            const data = {};
            days.forEach(day => {
                data[day] = Array.from({length: 24}, () => Math.floor(Math.random() * 5));
            });
            return data;
        }

        function loadReport(date) {
            const data = reportData[date] || reportData['2026-02-03'];
            
            document.getElementById('totalMentions').textContent = data.totalMentions;
            document.getElementById('criticalIssues').textContent = data.criticalIssues;
            document.getElementById('storeRating').textContent = data.storeRating + '/5.0';
            document.getElementById('responseTime').textContent = data.responseTime;

            renderHeatmap(data.heatmap);
            renderIssues(data.issues);

            // Update active button
            document.querySelectorAll('.date-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.date === date);
            });
        }

        function renderHeatmap(heatmapData) {
            const grid = document.getElementById('heatmapGrid');
            grid.innerHTML = '';

            // Header row (hours)
            grid.appendChild(document.createElement('div')); // empty corner
            for (let h = 0; h < 24; h++) {
                const hourLabel = document.createElement('div');
                hourLabel.className = 'heatmap-hour';
                hourLabel.textContent = h;
                grid.appendChild(hourLabel);
            }

            // Data rows
            Object.entries(heatmapData).forEach(([day, hours]) => {
                const dayLabel = document.createElement('div');
                dayLabel.className = 'heatmap-label';
                dayLabel.textContent = day;
                grid.appendChild(dayLabel);

                hours.forEach((intensity, hour) => {
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell';
                    cell.dataset.intensity = intensity;
                    cell.dataset.day = day;
                    cell.dataset.hour = hour;
                    cell.dataset.count = intensity;
                    
                    cell.addEventListener('mouseenter', showTooltip);
                    cell.addEventListener('mouseleave', hideTooltip);
                    
                    grid.appendChild(cell);
                });
            });
        }

        function renderIssues(issues) {
            const container = document.getElementById('issuesList');
            container.innerHTML = issues.map(issue => `
                <div class="issue-item">
                    <div class="issue-title">${issue.title}</div>
                    <div>${issue.platform} &middot; v${issue.version}</div>
                    <div class="issue-meta">
                        <span>&#128205; Etki: <strong>${issue.impact}</strong></span>
                        <span>&#9201; Sure: ${issue.duration}</span>
                        <span>&#128260; Durum: ${issue.status}</span>
                    </div>
                </div>
            `).join('');
        }

        function showTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            const cell = e.target;
            const day = cell.dataset.day;
            const hour = cell.dataset.hour;
            const count = cell.dataset.count;
            
            tooltip.textContent = `${day} ${hour}:00 - ${count} entry`;
            tooltip.style.display = 'block';
            tooltip.style.left = e.pageX + 10 + 'px';
            tooltip.style.top = e.pageY + 10 + 'px';
        }

        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }

        // Event listeners
        document.querySelectorAll('.date-btn').forEach(btn => {
            btn.addEventListener('click', () => loadReport(btn.dataset.date));
        });

        // Initial load
        loadReport('2026-02-03');
    </script>
</body>
</html>
